# Clockify RAG CLI - Files Manifest

## Project Files

### Core Application Files

#### `clockify_rag.py` (Main Tool)
- **Purpose**: Complete CLI tool implementation with all RAG functionality
- **Size**: ~320 lines of Python code
- **Dependencies**: `requests`, `numpy`, Python 3.7+
- **Functionality**:
  - `chunk`: Splits markdown documentation into overlapping chunks
  - `embed`: Generates semantic embeddings for all chunks using Ollama
  - `ask`: Retrieves relevant chunks and generates LLM-based answers
- **Usage**: `python3 clockify_rag.py [chunk|embed|ask "question"]`

### Documentation Files

#### `README_RAG.md` (Comprehensive Guide)
- **Purpose**: Complete technical documentation
- **Contents**:
  - Architecture overview (chunking, embedding, retrieval strategies)
  - Detailed explanation of each component
  - Setup prerequisites and requirements
  - Full usage instructions with examples
  - Configuration options and customization
  - Troubleshooting guide
  - Known limitations and future improvements
  - References to external resources
- **Audience**: Technical users, developers, power users

#### `QUICKSTART.md` (Quick Reference)
- **Purpose**: Fast onboarding guide for new users
- **Contents**:
  - One-time setup instructions
  - Step-by-step knowledge base building
  - Basic usage examples
  - Common queries for testing
  - File structure overview
  - Troubleshooting for common issues
  - Quick command reference
- **Audience**: New users, quick lookups

#### `FILES_MANIFEST.md` (This File)
- **Purpose**: Complete inventory and description of all project files
- **Contents**: File-by-file breakdown with purposes and usage

### Configuration & Setup Files

#### `requirements.txt`
- **Purpose**: Python dependency specification
- **Contents**:
  - `requests==2.32.5` (HTTP library for API calls to Ollama)
  - `numpy==2.3.4` (Linear algebra for embedding calculations)
- **Usage**: `pip install -r requirements.txt`
- **Alternative**: Dependencies are pre-installed in `rag_env/` virtual environment

#### `config_example.py`
- **Purpose**: Reference guide for all configurable parameters
- **Contents**:
  - Chunking configuration (chunk size, overlap)
  - Embedding model selection and Ollama URL
  - Retrieval parameters (top-K, similarity threshold)
  - LLM configuration (model, temperature, tokens)
  - System prompt templates
  - File paths for input/output
  - Advanced tuning options
  - Usage examples and customization tips
- **Usage**: Reference for understanding available configurations
- **Note**: Current implementation has parameters hardcoded in `clockify_rag.py`

#### `setup.sh` (Setup Automation)
- **Purpose**: Automated one-time setup script (macOS/Linux)
- **Contents**:
  - Python version verification
  - Virtual environment creation
  - Dependency installation via pip
  - Knowledge base file validation
  - Initial chunking and embedding steps
  - Final status report with next steps
- **Executable**: Yes (chmod +x)
- **Usage**: `./setup.sh`
- **Platform**: macOS/Linux only (use manual setup on Windows)

### Knowledge Base Files

#### `knowledge_full.md` (Input)
- **Purpose**: Source Clockify documentation
- **Size**: ~6.9 MB (~150 pages)
- **Format**: Markdown
- **Source**: Merged Clockify API/product documentation
- **Status**: Provided (not generated)
- **Note**: Required for chunking; splitting point is `##` (H2 headers)

#### `chunks.jsonl` (Generated)
- **Purpose**: Chunked documentation for embedding
- **Format**: JSON Lines (one JSON object per line)
- **Structure**: `{"id": <int>, "text": <string>}`
- **Generated by**: `python3 clockify_rag.py chunk`
- **Size**: Variable (typically 50KB-500KB depending on chunk count)
- **Content**: Split at `##` headers with 1600-character max per chunk
- **Overlap**: 200 characters between consecutive sub-chunks

#### `vecs.npy` (Generated)
- **Purpose**: Embedding vectors for all chunks
- **Format**: NumPy binary array (.npy)
- **Dimensions**: [num_chunks, embedding_dimension]
  - `num_chunks`: Number of chunks from `chunks.jsonl`
  - `embedding_dimension`: 768 (for nomic-embed-text model)
- **Data type**: float32
- **Generated by**: `python3 clockify_rag.py embed`
- **Size**: ~3 MB for typical knowledge base (~1000 chunks)
- **Loading**: `np.load("vecs.npy")`
- **Note**: Binary format, not human-readable

#### `meta.jsonl` (Generated)
- **Purpose**: Metadata for chunks (parallel to vecs.npy)
- **Format**: JSON Lines (one JSON object per line)
- **Structure**: `{"id": <int>, "text": <string>}`
- **Generated by**: `python3 clockify_rag.py embed`
- **Size**: Typically 2-10 MB
- **Content**: Chunk ID and full text (for retrieval and display)
- **Index alignment**: Line N of meta.jsonl corresponds to row N of vecs.npy

### Environment Files

#### `rag_env/` (Virtual Environment Directory)
- **Purpose**: Isolated Python environment with dependencies
- **Status**: Auto-created by `setup.sh` or manual `python3 -m venv rag_env`
- **Contents**:
  - Python interpreter
  - Installed packages (requests, numpy)
  - Activation scripts for different shells
- **Activation**:
  - macOS/Linux: `source rag_env/bin/activate`
  - Windows: `rag_env\Scripts\activate`
- **Size**: ~50-100 MB

### Optional/Reference Files

#### `config_example.py`
- **Type**: Reference documentation
- **Status**: Not currently used in main code
- **Purpose**: Shows how to parameterize the tool
- **Use case**: Users who want to modify default behavior

## File Usage Workflow

### First-Time Setup

```
1. User runs: ./setup.sh
   OR manually:
   → python3 -m venv rag_env
   → source rag_env/bin/activate
   → pip install -r requirements.txt

2. Script/user runs: python3 clockify_rag.py chunk
   → Reads: knowledge_full.md
   → Writes: chunks.jsonl

3. Script/user runs: python3 clockify_rag.py embed
   → Reads: chunks.jsonl
   → Writes: vecs.npy, meta.jsonl
   → Requires: Ollama running with nomic-embed-text model
```

### Regular Usage (After Setup)

```
User runs: python3 clockify_rag.py ask "question"
   → Reads: vecs.npy, meta.jsonl
   → Computes: cosine similarity between query and all chunks
   → Retrieves: top 6 most relevant chunks
   → Calls: Ollama chat API with qwen2.5:32b
   → Outputs: Answer with citation to snippet IDs
   → Requires: Ollama running with qwen2.5:32b model
```

## File Dependencies

```
clockify_rag.py
├── Imports: argparse, json, os, requests, numpy
├── Reads (chunk command):
│   └── knowledge_full.md
├── Reads (embed command):
│   └── chunks.jsonl
├── Reads (ask command):
│   ├── vecs.npy
│   └── meta.jsonl
├── Calls (external):
│   ├── Ollama /api/embeddings endpoint (nomic-embed-text)
│   └── Ollama /api/chat endpoint (qwen2.5:32b)
└── Requires: Python 3.7+, requests, numpy

setup.sh
├── Calls: python3
├── Creates: rag_env/
├── Runs: clockify_rag.py chunk (optional)
├── Runs: clockify_rag.py embed (optional)
└── Requires: bash, Python 3.7+

Documentation Files
├── README_RAG.md (reference only)
├── QUICKSTART.md (reference only)
├── config_example.py (reference only)
└── FILES_MANIFEST.md (this file)
```

## Storage Requirements

| File | Size | Persistent | Regeneratable |
|------|------|-----------|---|
| knowledge_full.md | 6.9 MB | Required | ✓ External |
| clockify_rag.py | <1 MB | Required | ✓ In repo |
| chunks.jsonl | 50-500 KB | Yes | ✓ From knowledge_full.md |
| vecs.npy | ~3 MB | Yes | ✓ From chunks.jsonl |
| meta.jsonl | 2-10 MB | Yes | ✓ From chunks.jsonl |
| rag_env/ | 50-100 MB | Yes | ✓ From requirements.txt |
| **Total** | **~70-120 MB** | | |

## File Modification Policy

### Never Modify
- `knowledge_full.md` (source document)
- `clockify_rag.py` (unless customizing)

### Safe to Regenerate
- `chunks.jsonl` - Delete and run `python3 clockify_rag.py chunk`
- `vecs.npy` - Delete and run `python3 clockify_rag.py embed`
- `meta.jsonl` - Delete and run `python3 clockify_rag.py embed`
- `rag_env/` - Delete and run `setup.sh` or create manually

### Safe to Modify
- `config_example.py` - Customize for your use case (reference only)
- `setup.sh` - Adjust paths/commands as needed

### Documentation Only
- `README_RAG.md` - Read-only reference
- `QUICKSTART.md` - Read-only reference
- `FILES_MANIFEST.md` - Read-only reference
- `requirements.txt` - Modify to add/remove dependencies

## Recovery Procedures

### Lost Knowledge Base Chunks
```bash
python3 clockify_rag.py chunk
```
Regenerates `chunks.jsonl` from `knowledge_full.md`

### Lost Embeddings
```bash
python3 clockify_rag.py embed
```
Regenerates `vecs.npy` and `meta.jsonl` from `chunks.jsonl`

### Corrupted Virtual Environment
```bash
rm -rf rag_env/
./setup.sh
```
Reinstalls all dependencies

### All Data Loss
```bash
./setup.sh
```
Rebuilds everything from `knowledge_full.md`

---

**Last Updated**: 2025-11-05
**Version**: 1.0
**Python**: 3.7+
**Platform**: macOS/Linux (primary), Windows (with manual setup)
